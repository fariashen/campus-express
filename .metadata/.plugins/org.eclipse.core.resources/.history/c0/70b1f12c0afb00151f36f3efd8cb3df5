package easyCourierFunction;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.support.annotation.AnyRes;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

import com.example.easycourier.R;

import easyCourierHttpPostRequest.RULHttpPost;

/**
 * 
 * @author vacation
 * 
 *         该类实现获取用户输入的信息，
 * 
 *         将获取的信息传递给网络请求 RULHttpPost.class
 * 
 *         网络请求向远程数据库发送插入操作请求，数据库返回结果码
 * 
 *         网络请求类将结果码发送给主线程处理
 * 
 */
public class RequestUpLoad extends Activity {

	/**
	 * 
	 * 获取所有 EditText 控件
	 * 
	 */
	private EditText et_CourierType;
	private EditText et_ReceiverName;
	private EditText et_ReceiverContact;
	private EditText et_ReceiveTime;

	// 获取“确定按钮”
	private Button bt_RequestCommit;
	
	//临时存放用户信息
	private String courierType;
	private String receiverName;
	private String receiverContact;
	private String receiveTime;

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_requestupload);
		getActionBar().setDisplayShowHomeEnabled(false);

		/**
		 * 获取所有控件
		 */

		et_CourierType = (EditText) findViewById(R.id.et_CourierType);
		et_ReceiverName = (EditText) findViewById(R.id.et_ReceiverName);
		et_ReceiverContact = (EditText) findViewById(R.id.et_ReceiverContact);
		et_ReceiveTime = (EditText) findViewById(R.id.et_ReceiveTime);

		bt_RequestCommit = (Button) findViewById(R.id.bt_RequestCommit);

		/**
		 * 为“确定”按钮设置监听
		 * 
		 * 当点击该按钮，触发启动网络请求线程
		 */
		bt_RequestCommit.setOnClickListener(new View.OnClickListener() {

			@Override
			public void onClick(View v) {

				// 获取用户输入的信息
				courierType = et_CourierType.getText().toString();
				receiverName = et_ReceiverName.getText().toString();
				receiverContact = et_ReceiverContact.getText().toString();
				receiveTime = et_ReceiveTime.getText().toString();
				
				//判断信息是否填写完毕
				if (courierType.equals("") || receiverName.equals("")
						|| receiverContact.equals("") || receiveTime.equals("")) {
					Toast.makeText(RequestUpLoad.this, "信息未完全填写！",
							Toast.LENGTH_LONG).show();
				}
				// 将获取的信息作为参数，传入网络请求线程
				RULHttpPost mHttpPost = new RULHttpPost(courierType,
						receiverName, receiverContact, receiveTime);

				//启动网络请求线程
				mHttpPost.start();
			}
		});

	}

	// 处理网络访问线程回传的消息
	public static Handler RULHandler = new Handler() {
		public void handleMessage(android.os.Message msg) {

			switch (msg.what) {
			/**
			 * 
			 * undo
			 * 
			 */
			}

		};
	};

}
